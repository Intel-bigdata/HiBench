<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_55) on Wed May 07 10:09:59 CST 2014 -->
<title>URLUtil (Nutch 1.2 API)</title>
<meta name="date" content="2014-05-07">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="URLUtil (Nutch 1.2 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/URLUtil.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/nutch/util/TrieStringMatcher.TrieNode.html" title="class in org.apache.nutch.util"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/nutch/util/URLUtil.html" target="_top">Frames</a></li>
<li><a href="URLUtil.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.nutch.util</div>
<h2 title="Class URLUtil" class="title">Class URLUtil</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.nutch.util.URLUtil</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">URLUtil</span>
extends java.lang.Object</pre>
<div class="block">Utility class for URL analysis</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../org/apache/nutch/util/URLUtil.html#URLUtil()">URLUtil</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/nutch/util/URLUtil.html#chooseRepr(java.lang.String, java.lang.String, boolean)">chooseRepr</a></strong>(java.lang.String&nbsp;src,
          java.lang.String&nbsp;dst,
          boolean&nbsp;temp)</code>
<div class="block">Given two urls, a src and a destination of a redirect, it returns the 
 representative url.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/nutch/util/URLUtil.html#getDomainName(java.lang.String)">getDomainName</a></strong>(java.lang.String&nbsp;url)</code>
<div class="block">Returns the domain name of the url.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/nutch/util/URLUtil.html#getDomainName(java.net.URL)">getDomainName</a></strong>(java.net.URL&nbsp;url)</code>
<div class="block">Returns the domain name of the url.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="../../../../org/apache/nutch/util/domain/DomainSuffix.html" title="class in org.apache.nutch.util.domain">DomainSuffix</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/nutch/util/URLUtil.html#getDomainSuffix(java.lang.String)">getDomainSuffix</a></strong>(java.lang.String&nbsp;url)</code>
<div class="block">Returns the <a href="../../../../org/apache/nutch/util/domain/DomainSuffix.html" title="class in org.apache.nutch.util.domain"><code>DomainSuffix</code></a> corresponding to the
 last public part of the hostname</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../../org/apache/nutch/util/domain/DomainSuffix.html" title="class in org.apache.nutch.util.domain">DomainSuffix</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/nutch/util/URLUtil.html#getDomainSuffix(java.net.URL)">getDomainSuffix</a></strong>(java.net.URL&nbsp;url)</code>
<div class="block">Returns the <a href="../../../../org/apache/nutch/util/domain/DomainSuffix.html" title="class in org.apache.nutch.util.domain"><code>DomainSuffix</code></a> corresponding to the
 last public part of the hostname</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/nutch/util/URLUtil.html#getHost(java.lang.String)">getHost</a></strong>(java.lang.String&nbsp;url)</code>
<div class="block">Returns the lowercased hostname for the url or null if the url is not well
 formed.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String[]</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/nutch/util/URLUtil.html#getHostSegments(java.lang.String)">getHostSegments</a></strong>(java.lang.String&nbsp;url)</code>
<div class="block">Partitions of the hostname of the url by "."</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String[]</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/nutch/util/URLUtil.html#getHostSegments(java.net.URL)">getHostSegments</a></strong>(java.net.URL&nbsp;url)</code>
<div class="block">Partitions of the hostname of the url by "."</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/nutch/util/URLUtil.html#getPage(java.lang.String)">getPage</a></strong>(java.lang.String&nbsp;url)</code>
<div class="block">Returns the page for the url.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/nutch/util/URLUtil.html#isSameDomainName(java.lang.String, java.lang.String)">isSameDomainName</a></strong>(java.lang.String&nbsp;url1,
                java.lang.String&nbsp;url2)</code>
<div class="block">Returns whether the given urls have the same domain name.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/nutch/util/URLUtil.html#isSameDomainName(java.net.URL, java.net.URL)">isSameDomainName</a></strong>(java.net.URL&nbsp;url1,
                java.net.URL&nbsp;url2)</code>
<div class="block">Returns whether the given urls have the same domain name.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/nutch/util/URLUtil.html#main(java.lang.String[])">main</a></strong>(java.lang.String[]&nbsp;args)</code>
<div class="block">For testing</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="URLUtil()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>URLUtil</h4>
<pre>public&nbsp;URLUtil()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getDomainName(java.net.URL)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDomainName</h4>
<pre>public static&nbsp;java.lang.String&nbsp;getDomainName(java.net.URL&nbsp;url)</pre>
<div class="block">Returns the domain name of the url. The domain name of a url is
  the substring of the url's hostname, w/o subdomain names. As an
  example <br><code>
  getDomainName(conf, new URL(http://lucene.apache.org/))
  </code><br>
  will return <br><code> apache.org</code></div>
</li>
</ul>
<a name="getDomainName(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDomainName</h4>
<pre>public static&nbsp;java.lang.String&nbsp;getDomainName(java.lang.String&nbsp;url)
                                      throws java.net.MalformedURLException</pre>
<div class="block">Returns the domain name of the url. The domain name of a url is
  the substring of the url's hostname, w/o subdomain names. As an
  example <br><code>
  getDomainName(conf, new http://lucene.apache.org/)
  </code><br>
  will return <br><code> apache.org</code></div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.net.MalformedURLException</code></dd></dl>
</li>
</ul>
<a name="isSameDomainName(java.net.URL, java.net.URL)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isSameDomainName</h4>
<pre>public static&nbsp;boolean&nbsp;isSameDomainName(java.net.URL&nbsp;url1,
                       java.net.URL&nbsp;url2)</pre>
<div class="block">Returns whether the given urls have the same domain name.
 As an example, <br>
 <code> isSameDomain(new URL("http://lucene.apache.org")
 , new URL("http://people.apache.org/"))
 <br> will return true. </code></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if the domain names are equal</dd></dl>
</li>
</ul>
<a name="isSameDomainName(java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isSameDomainName</h4>
<pre>public static&nbsp;boolean&nbsp;isSameDomainName(java.lang.String&nbsp;url1,
                       java.lang.String&nbsp;url2)
                                throws java.net.MalformedURLException</pre>
<div class="block">Returns whether the given urls have the same domain name.
 As an example, <br>
 <code> isSameDomain("http://lucene.apache.org"
 ,"http://people.apache.org/")
 <br> will return true. </code></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if the domain names are equal</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.net.MalformedURLException</code></dd></dl>
</li>
</ul>
<a name="getDomainSuffix(java.net.URL)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDomainSuffix</h4>
<pre>public static&nbsp;<a href="../../../../org/apache/nutch/util/domain/DomainSuffix.html" title="class in org.apache.nutch.util.domain">DomainSuffix</a>&nbsp;getDomainSuffix(java.net.URL&nbsp;url)</pre>
<div class="block">Returns the <a href="../../../../org/apache/nutch/util/domain/DomainSuffix.html" title="class in org.apache.nutch.util.domain"><code>DomainSuffix</code></a> corresponding to the
 last public part of the hostname</div>
</li>
</ul>
<a name="getDomainSuffix(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDomainSuffix</h4>
<pre>public static&nbsp;<a href="../../../../org/apache/nutch/util/domain/DomainSuffix.html" title="class in org.apache.nutch.util.domain">DomainSuffix</a>&nbsp;getDomainSuffix(java.lang.String&nbsp;url)
                                    throws java.net.MalformedURLException</pre>
<div class="block">Returns the <a href="../../../../org/apache/nutch/util/domain/DomainSuffix.html" title="class in org.apache.nutch.util.domain"><code>DomainSuffix</code></a> corresponding to the
 last public part of the hostname</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.net.MalformedURLException</code></dd></dl>
</li>
</ul>
<a name="getHostSegments(java.net.URL)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHostSegments</h4>
<pre>public static&nbsp;java.lang.String[]&nbsp;getHostSegments(java.net.URL&nbsp;url)</pre>
<div class="block">Partitions of the hostname of the url by "."</div>
</li>
</ul>
<a name="getHostSegments(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHostSegments</h4>
<pre>public static&nbsp;java.lang.String[]&nbsp;getHostSegments(java.lang.String&nbsp;url)
                                          throws java.net.MalformedURLException</pre>
<div class="block">Partitions of the hostname of the url by "."</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.net.MalformedURLException</code></dd></dl>
</li>
</ul>
<a name="chooseRepr(java.lang.String, java.lang.String, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>chooseRepr</h4>
<pre>public static&nbsp;java.lang.String&nbsp;chooseRepr(java.lang.String&nbsp;src,
                          java.lang.String&nbsp;dst,
                          boolean&nbsp;temp)</pre>
<div class="block"><p>Given two urls, a src and a destination of a redirect, it returns the 
 representative url.<p>
 
 <p>This method implements an extended version of the algorithm used by the
 Yahoo! Slurp crawler described here:<br>
 <a href=
 "http://help.yahoo.com/l/nz/yahooxtra/search/webcrawler/slurp-11.html"> How
 does the Yahoo! webcrawler handle redirects?</a> <br>
 <br>
 <ol>
 <li>Choose target url if either url is malformed.</li>
 <li>If different domains the keep the destination whether or not the 
 redirect is temp or perm</li>
 <ul><li>a.com -> b.com*</li></ul>
 <li>If the redirect is permanent and the source is root, keep the source.</li>
 <ul><li>*a.com -> a.com?y=1 || *a.com -> a.com/xyz/index.html</li></ul>
 <li>If the redirect is permanent and the source is not root and the 
 destination is root, keep the destination</li>
 <ul><li>a.com/xyz/index.html -> a.com*</li></ul>
 <li>If the redirect is permanent and neither the source nor the destination
 is root, then keep the destination</li>
 <ul><li>a.com/xyz/index.html -> a.com/abc/page.html*</li></ul>
 <li>If the redirect is temporary and source is root and destination is not
 root, then keep the source</li>
 <ul><li>*a.com -> a.com/xyz/index.html</li></ul>
 <li>If the redirect is temporary and source is not root and destination is
 root, then keep the destination</li>
 <ul><li>a.com/xyz/index.html -> a.com*</li></ul>
 <li>If the redirect is temporary and neither the source or the destination
 is root, then keep the shortest url.  First check for the shortest host,
 and if both are equal then check by path.  Path is first by length then by
 the number of / path separators.</li>
 <ul>
 <li>a.com/xyz/index.html -> a.com/abc/page.html*</li>
 <li>*www.a.com/xyz/index.html -> www.news.a.com/xyz/index.html</li>
 </ul>
 <li>If the redirect is temporary and both the source and the destination
 are root, then keep the shortest sub-domain</li>
 <ul><li>*www.a.com -> www.news.a.com</li></ul>
 <br>
 While not in this logic there is a further piece of representative url 
 logic that occurs during indexing and after scoring.  During creation of 
 the basic fields before indexing, if a url has a representative url stored
 we check both the url and its representative url (which should never be 
 the same) against their linkrank scores and the highest scoring one is 
 kept as the url and the lower scoring one is held as the orig url inside 
 of the index.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>src</code> - The source url.</dd><dd><code>dst</code> - The destination url.</dd><dd><code>temp</code> - Is the redirect a temporary redirect.</dd>
<dt><span class="strong">Returns:</span></dt><dd>String The representative url.</dd></dl>
</li>
</ul>
<a name="getHost(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHost</h4>
<pre>public static&nbsp;java.lang.String&nbsp;getHost(java.lang.String&nbsp;url)</pre>
<div class="block">Returns the lowercased hostname for the url or null if the url is not well
 formed.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>url</code> - The url to check.</dd>
<dt><span class="strong">Returns:</span></dt><dd>String The hostname for the url.</dd></dl>
</li>
</ul>
<a name="getPage(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPage</h4>
<pre>public static&nbsp;java.lang.String&nbsp;getPage(java.lang.String&nbsp;url)</pre>
<div class="block">Returns the page for the url.  The page consists of the protocol, host,
 and path, but does not include the query string.  The host is lowercased
 but the path is not.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>url</code> - The url to check.</dd>
<dt><span class="strong">Returns:</span></dt><dd>String The page for the url.</dd></dl>
</li>
</ul>
<a name="main(java.lang.String[])">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(java.lang.String[]&nbsp;args)</pre>
<div class="block">For testing</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/URLUtil.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/nutch/util/TrieStringMatcher.TrieNode.html" title="class in org.apache.nutch.util"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/nutch/util/URLUtil.html" target="_top">Frames</a></li>
<li><a href="URLUtil.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &copy; 2006 The Apache Software Foundation</small></p>
</body>
</html>
